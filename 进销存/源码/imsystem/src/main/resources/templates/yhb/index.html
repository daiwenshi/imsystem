<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>Big Boss-Index</title>
		<link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}">
		<link rel="stylesheet" th:href="@{/assets/css/font-awesome.min.css}">
		<link rel="stylesheet" th:href="@{/assets/css/style.css}">
		<!-- MAIN CSS -->
		<link rel="stylesheet" th:href="@{/assets/css/main.css}">
		<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
		<link rel="stylesheet" th:href="@{/assets/css/demo.css}">
		<!-- GOOGLE FONTS -->
		<link th:href="@{/assets/css/css.css}" rel="stylesheet">
		<!-- ICONS -->
		<link rel="apple-touch-icon" sizes="76x76" th:href="@{/assets/img/apple-icon.png}">
		<link rel="icon" type="image/png" sizes="96x96" th:href="@{/assets/img/favicon.png}">
		
		<script th:src="@{/assets/js/klorofil-common.js}"></script>
		<script th:src="@{/assets/js/jquery.min.js}"></script>
		<script th:src="@{/assets/js/bootstrap.min.js}"></script>
		<script th:src="@{/assets/js/jquery.slimscroll.min.js}"></script>
		<script th:src="@{/assets/js/jquery.easypiechart.min.js}"></script>
		<script th:src="@{/assets/js/vue.js}"></script>
		<script th:src="@{/assets/js/statistics.js}"></script>
	</head>
	<body>
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<!-- OVERVIEW -->
					<div class="panel panel-headline">
						<div class="panel-heading">
							<h3 class="panel-title">Weekly Overview</h3>
							<p class="panel-subtitle">Period: Oct 14, 2016 - Oct 21, 2016</p>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-download"></i></span>
										<p>
											<span class="number profit">￥1,252</span>
											<span class="title">今日利润</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-shopping-bag"></i></span>
										<p>
											<span class="number SalesMoney">￥203</span>
											<span class="title">今日销售额</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-eye"></i></span>
										<p>
											<span class="number count">3</span>
											<span class="title">订单数量</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-bar-chart"></i></span>
										<p>
											<span class="number first">20</span>
											<span class="title">今日销冠</span>
										</p>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div id="headline-chart" class="ct-chart"></div>
								</div>
						</div>
					</div>
					<!-- END OVERVIEW -->
					<div class="row">
						<div class="col-md-6">
							<!-- MULTI CHARTS -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">店铺排名TOP 5</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<div id="shopDay" class="ct-chart"></div>
								</div>
							</div>
							<!-- END MULTI CHARTS -->
						</div>
						<div class="col-md-6">
							<!-- MULTI CHARTS -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">资金统计(￥)</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<div id="visits-trends-chart" class="ct-chart"></div>
								</div>
							</div>
							<!-- END MULTI CHARTS -->
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							<!-- TODO LIST -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">To-Do List</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<ul class="list-unstyled todo-list">
										<li>
											<label class="control-inline fancy-checkbox">
												<input type="checkbox"><span></span>
											</label>
											<p>
												<span class="title">Restart Server</span>
												<span class="short-description">Dynamically integrate client-centric technologies without cooperative resources.</span>
												<span class="date">Oct 9, 2016</span>
											</p>
											<div class="controls">
												<a href="#"><i class="icon-software icon-software-pencil"></i></a> <a href="#"><i class="icon-arrows icon-arrows-circle-remove"></i></a>
											</div>
										</li>
										<li>
											<label class="control-inline fancy-checkbox">
												<input type="checkbox"><span></span>
											</label>
											<p>
												<span class="title">Retest Upload Scenario</span>
												<span class="short-description">Compellingly implement clicks-and-mortar relationships without highly efficient metrics.</span>
												<span class="date">Oct 23, 2016</span>
											</p>
											<div class="controls">
												<a href="#"><i class="icon-software icon-software-pencil"></i></a> <a href="#"><i class="icon-arrows icon-arrows-circle-remove"></i></a>
											</div>
										</li>
										<li>
											<label class="control-inline fancy-checkbox">
												<input type="checkbox"><span></span>
											</label>
											<p>
												<strong>Functional Spec Meeting</strong>
												<span class="short-description">Monotonectally formulate client-focused core competencies after parallel web-readiness.</span>
												<span class="date">Oct 11, 2016</span>
											</p>
											<div class="controls">
												<a href="#"><i class="icon-software icon-software-pencil"></i></a> <a href="#"><i class="icon-arrows icon-arrows-circle-remove"></i></a>
											</div>
										</li>
									</ul>
								</div>
							</div>
							<!-- END TODO LIST -->
						</div>
						<div class="col-md-5">
							<!-- TIMELINE -->
							<div class="panel panel-scrolling">
								<div class="panel-heading">
									<h3 class="panel-title">Recent User Activity</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<ul class="list-unstyled activity-list">
										<li>
											<img src="../assets/img/user1.png" alt="Avatar" class="img-circle pull-left avatar">
											<p><a href="#">Michael</a> has achieved 80% of his completed tasks <span class="timestamp">20 minutes ago</span></p>
										</li>
										<li>
											<img src="../assets/img/user2.png" alt="Avatar" class="img-circle pull-left avatar">
											<p><a href="#">Daniel</a> has been added as a team member to project <a href="#">System Update</a> <span class="timestamp">Yesterday</span></p>
										</li>
										<li>
											<img src="../assets/img/user3.png" alt="Avatar" class="img-circle pull-left avatar">
											<p><a href="#">Martha</a> created a new heatmap view <a href="#">Landing Page</a> <span class="timestamp">2 days ago</span></p>
										</li>
										<li>
											<img src="../assets/img/user4.png" alt="Avatar" class="img-circle pull-left avatar">
											<p><a href="#">Jane</a> has completed all of the tasks <span class="timestamp">2 days ago</span></p>
										</li>
										<li>
											<img src="../assets/img/user5.png" alt="Avatar" class="img-circle pull-left avatar">
											<p><a href="#">Jason</a> started a discussion about <a href="#">Weekly Meeting</a> <span class="timestamp">3 days ago</span></p>
										</li>
									</ul>
									<button type="button" class="btn btn-primary btn-bottom center-block">Load More</button>
								</div>
							</div>
							<!-- END TIMELINE -->
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<!-- TASKS -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">My Tasks</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<ul class="list-unstyled task-list">
										<li>
											<p>Updating Users Settings <span class="label-percent">23%</span></p>
											<div class="progress progress-xs">
												<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="23" aria-valuemin="0" aria-valuemax="100" style="width:23%">
													<span class="sr-only">23% Complete</span>
												</div>
											</div>
										</li>
										<li>
											<p>Load &amp; Stress Test <span class="label-percent">80%</span></p>
											<div class="progress progress-xs">
												<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
													<span class="sr-only">80% Complete</span>
												</div>
											</div>
										</li>
										<li>
											<p>Data Duplication Check <span class="label-percent">100%</span></p>
											<div class="progress progress-xs">
												<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
													<span class="sr-only">Success</span>
												</div>
											</div>
										</li>
										<li>
											<p>Server Check <span class="label-percent">45%</span></p>
											<div class="progress progress-xs">
												<div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
													<span class="sr-only">45% Complete</span>
												</div>
											</div>
										</li>
										<li>
											<p>Mobile App Development <span class="label-percent">10%</span></p>
											<div class="progress progress-xs">
												<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width: 10%">
													<span class="sr-only">10% Complete</span>
												</div>
											</div>
										</li>
									</ul>
								</div>
							</div>
							<!-- END TASKS -->
						</div>
						<div class="col-md-4">
							<!-- VISIT CHART -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">Website Visits</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<div id="visits-chart" class="ct-chart"></div>
								</div>
							</div>
							<!-- END VISIT CHART -->
						</div>
						<div class="col-md-4">
							<!-- REALTIME CHART -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">System Load</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<div id="system-load" class="easy-pie-chart" data-percent="70">
										<span class="percent">70</span>
									</div>
									<h4>CPU Load</h4>
									<ul class="list-unstyled list-justify">
										<li>High: <span>95%</span></li>
										<li>Average: <span>87%</span></li>
										<li>Low: <span>20%</span></li>
										<li>Threads: <span>996</span></li>
										<li>Processes: <span>259</span></li>
									</ul>
								</div>
							</div>
							<!-- END REALTIME CHART -->
						</div>
					</div>
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
	</body>
	<script type="text/javascript" th:src="@{/assets/echarts/echarts/echarts.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts-gl/echarts-gl.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts-stat/ecStat.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts/extension/dataTool.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts/map/js/china.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts/map/js/world.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/echarts/extension/bmap.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/echarts/simplex.js}"></script>
	<script>
		var sid = getStoreId();
		 $(function(){
				var startTime = getStartTime();
				var endTime = getEndTime();
				$(".panel-subtitle").text("Period: "+getStartTime());
				var top =  queryTop(sid,"",startTime,endTime);
				$(".profit").text("￥"+top.column2);
				$(".SalesMoney").text("￥"+top.paymoney);
				$(".count").text(top.count);
				$(".first").text(top.column3);
			 /**
				 * Top统计图
				 */
			 var img1 = queryDaysAgo(sid,"","","null");
				var profit = [];
				var SalesMoney = [];
				var count = [];
				var time = [];
				$.each(img1,function(i,obj){
					profit.push(obj.column2);
					time.push(obj.column3);
					count.push(obj.count);
					SalesMoney.push(obj.paymoney);
				});
				var options = myChart.getOption();
				options.series[0].data=SalesMoney;
				options.series[1].data=profit;
				options.series[2].data=count;
				options.xAxis[0].data = time;
				options.yAxis[0].max = Math.max.apply(null,SalesMoney)+500;
				options.yAxis[1].max = Math.max.apply(null,profit)+500;
				options.yAxis[2].max = Math.max.apply(null,count)+50;
				myChart.setOption(options);
				/*店铺排名*/
				var img2 = queryRanking("","",sid);
				var options2 = myChart2.getOption();
				var name = [];
				var tedayMoney = [];
				var sumMoney = [];
				$.each(img2,function(ss,objs){
					name.push(objs.column3+"["+objs.column4+"]");
					tedayMoney.push(objs.column5);
					sumMoney.push(objs.column2);
				});
				options2.series[1].data=sumMoney;
				options2.series[0].data=tedayMoney;
				options2.yAxis[0].data = name;
				myChart2.setOption(options2);
				
				/*盈利亏损图*/
				var img3 = queryThisYear(getThisYear(),sid);
				var options1 = myChart1.getOption();
				var tedayMoney = [];
				var t = [];
				$.each(img3,function(ss,objs){
					tedayMoney.push(objs.column2);
					t.push(objs.column3);
				});
				options1.yAxis[0].data = t;
				options1.series[0].data=tedayMoney;
				myChart1.setOption(options1);
		 })
		var dom = document.getElementById("headline-chart");
		var myChart = echarts.init(dom);
		var app = {};
		option = null;
		
		var colors = ['rgb(2, 143, 208)', '#d14a61', '#00AA00'];
		
		option = {
		    color: colors,
		    tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            type: 'cross'
		        }
		    },
		    grid: {
		        right: '20%'
		    },
		    toolbox: {
		        feature: {
		            dataView: {show: true, readOnly: false},
		            restore: {show: true},
		            saveAsImage: {show: true}
		        }
		    },
		    legend: {
		        data:['销售额','总利润','订单数量']
		    },
		    xAxis: [
		        {
		            type: 'category',
		            axisTick: {
		                alignWithLabel: true
		            },
		            data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
		            splitLine:{
			            　　　　show:false
			            　　}
		        }
		    ],
		    yAxis: [
		        {
		            type: 'value',
		            name: '销售额',
		            min: 0,
		            max: 30000,
		            position: 'right',
		            axisLine: {
		                lineStyle: {
		                    color: colors[0]
		                }
		            },
		            axisLabel: {
		                formatter: '{value} ￥'
		            },
		            splitLine:{
			            　　　　show:false
			            　　}
		        },
		        {
		            type: 'value',
		            name: '总利润',
		            min: 0,
		            max: 30000,
		            position: 'right',
		            offset: 80,
		            axisLine: {
		                lineStyle: {
		                    color: colors[1]
		                }
		            },
		            axisLabel: {
		                formatter: '{value} ￥'
		            }
		        },
		        {
		            type: 'value',
		            name: '订单数量',
		            min: 0,
		            max: 500,
		            position: 'left',
		            axisLine: {
		                lineStyle: {
		                    color: colors[2]
		                }
		            },
		            axisLabel: {
		                formatter: '{value} 单'
		            }
		        }
		    ],
		    series: [
		        {
		            name:'销售额',
		            type:'bar',
		            data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3]
		        },
		        {
		            name:'总利润',
		            type:'bar',
		            yAxisIndex: 1,
		            data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3]
		        },
		        {
		            name:'订单数量',
		            type:'line',
		            yAxisIndex: 2,
		            data:[2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]
		        }
		    ]
		};
		;
		
		/**
		 * 盈利亏损图
		 */
		var dom1 = document.getElementById("visits-trends-chart");
		var myChart1 = echarts.init(dom1);
		var app = {};
		option1 = null;
		var labelRight = {
		    normal: {
		        position: 'right'
		    }
		};
		option1 = {
			color : 'rgb(2, 143, 208)',
		    tooltip : {
		        trigger: 'axis',
		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
		        }
		    },
		    grid: {
		        top: 30,
		        bottom: 30
		    },
		    xAxis: {
		        type : 'value',
		        position: 'top',
		        splitLine: {lineStyle:{type:'dashed'}},
		    },
		    yAxis: {
		        type : 'category',
		        axisLine: {show: false},
		        axisLabel: {show: false},
		        axisTick: {show: false},
		        splitLine: {show: false},
		        data : ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月','11月','12月']
		    },
		    series : [
		        {
		            name:'盈利',
		            type:'bar',
		            stack: '总量',
		            label: {
		                normal: {
		                    show: true,
		                    formatter: '{b}'
		                }
		            },
		            data:[
		                3000,
		                -3000,
		                6000,
		                8000,
		                10000,
		                -6000,
		                3000,
		                -3000,
		                8000,
		                900,
		                1000,
		                -1233,
		            ]
		        }
		    ]
		};
		;
		/**
		 * 店铺排名前五销售业绩
		 */
		var dom2 = document.getElementById("shopDay");
		var myChart2 = echarts.init(dom2);
		var app = {};
		option2 = null;
		
		option2 = {
		    tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            type: 'shadow'
		        }
		    },
		    legend: {
		        data: ['本月销售额', '今日销售额']
		    },
		    grid: {
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true
		    },
		    xAxis: {
		        type: 'value',
		        boundaryGap: [0, 0.01]
		    },
		    yAxis: {
		        type: 'category',
		        data: ['巴西','印尼','美国','印度','中国','世界人口(万)'],
		    },
		    series: [
		        {
		            name: '本月销售额',
		            type: 'bar',
		            data: [18203, 23489, 29034, 104970, 131744, 630230],
		        },
		        {
		            name: '今日销售额',
		            type: 'bar',
		            data: [19325, 23438, 31000, 121594, 134141, 681807]
		        }
		    ]
		};
		;
		window.addEventListener("resize",() =>{
			this.myChart.resize();
			this.myChart1.resize();
			this.myChart2.resize();
		});
		if (option && typeof option === "object") {
		    myChart.setOption(option, true);
		}
		if (option1 && typeof option1 === "object") {
		    myChart1.setOption(option1, true);
		}
		if (option2 && typeof option2 === "object") {
		    myChart2.setOption(option2, true);
		}
	</script>
	
</html>
